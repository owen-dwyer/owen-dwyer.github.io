<!doctype html>
<html>
	<head>
		<title>Neovis.js Simple Example</title>

		<!-- Stylesheet -->
		<link rel="stylesheet" href="style.css">

		<!-- jQuery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> 
		
		<!-- Neo4j driver -->
		<script src="https://unpkg.com/neo4j-driver"></script>

		<!-- NeoVis -->
		<script src="https://unpkg.com/neovis.js@2.0.0-alpha.7"></script>

		<!-- Custom script -->
		<script src="vis-window.js"></script>

	</head>
	<body onload="draw()">

		<div id="header">

			<div class="logo-container", id="header-text">
				<div>Pathway Graph demo <span id="beta">beta</span></div>
			</div>
			<div class="logo-container-container">
				<div class="logo-container">
					<img src="media/Ox_cs.png"/>
				</div>
				<div class="logo-container">
					<img src="media/tuw.svg"/>
				</div>
				<div class="logo-container">
					<img src="media/cdt.png"/>
					<img src="media/BDI+OX.jpg"/>
				</div>
			</div>

		</div>

		<div id="main-block">

			<!-- Visualisation window -->
			<div id="viz"></div>

			<!-- Controls -->
			<div id="controls">

				Cypher query: <textarea rows="1" cols=50 id="cypher"></textarea> <input type="submit" value="Submit" id="reload">
				<input type="submit" value="Stabilize" id="stabilize">

				<br/>
				Show: 
				<input type="submit" value="FULL GRAPH" id="full_graph">
				<input type="submit" value="ALL PATIENTS" id="all_patients">
				<input type="submit" value="PATHWAYS" id="pathways">
				<input type="submit" value="PATHWAYS + EVENTS" id="pathways_events">
				<input type="submit" value="PATHWAYS + EVENTS HIERARCHY" id="pathways_events_hierarchy">

				<div id="key">
					Key&nbsp;
					<p style="background-color: #768692;">Patient</p>
					<p style="background-color: #005EB8;">Event</p>
					<p style="background-color: #AE2573;">Diagnosis (ICD10)</p>
					<p style="background-color: #78BE20;">Procedure (OPCS4)</p>
				</div>
			</div>


			<hr>

			<div id ="explainer">
				This graph demonstrates how knowledge graphs - heterogeneous graphs of entities linked by semantically meaningful relations - can provide a natural and intuitive representation for a patient's pathway. 
				<br /><br />
				They also allow more complex contextual data to be integrated - for example, a medical procedure is not just a single code, but has its place in a hierarchy of codes that forms a natural ontology. So patient similarity could be identified where two patients might undergo similar, but not identically coded procedures. (In the future, we will try to add horizontal disease-disease links, for example where two very different diseases commonly co-occur)
				
				The diagnosis codes could easily be expanded into a hierarchy in much the same way, and in the future we will aim to integrate further information such as prescriptions, imaging, and testing, with contextual information from their specific domain ontologies.
			</div>
			
		</div>

		<div id="footer">
			<a href="mailto:owen.dwyer@cs.ox.ac.uk">Owen Dwyer</a> &nbsp; | &nbsp; <a href="https://github.com/owen-dwyer/owen-dwyer.github.io">github</a> &nbsp; | &nbsp; built with <a href="https://github.com/neo4j-contrib/neovis.js/tree/2.0.0">neovis.js</a> v2.0.0-alpha.8
		</div>
	</body>

	<!-- Click events -->
	<script src="click-events.js"></script>

</html>